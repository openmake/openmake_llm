{"file":"/Volumes/MAC_APP/openmake_llm/backend/api/src/mcp/user-sandbox.ts","mappings":"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","names":[],"sources":["/Volumes/MAC_APP/openmake_llm/backend/api/src/mcp/user-sandbox.ts"],"sourcesContent":["/**\n * ì‚¬ìš©ì ë°ì´í„° ê²©ë¦¬ (Sandbox)\n * \n * ê° ì‚¬ìš©ìë³„ë¡œ ë…ë¦½ëœ ì‘ì—… ë””ë ‰í† ë¦¬ë¥¼ ì œê³µí•˜ê³ \n * ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ë°ì´í„°ì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ ê²©ë¦¬í•©ë‹ˆë‹¤.\n */\n\nimport * as path from 'path';\nimport * as fs from 'fs';\n\n// ì‚¬ìš©ì ë°ì´í„° ë£¨íŠ¸ ê²½ë¡œ\nconst USER_DATA_ROOT = process.env.USER_DATA_PATH || './data/users';\n\n/**\n * ì‚¬ìš©ìë³„ ê²©ë¦¬ëœ ì‘ì—… í™˜ê²½\n */\nexport class UserSandbox {\n    /**\n     * ì‚¬ìš©ìë³„ ì‘ì—… ë””ë ‰í† ë¦¬ ê²½ë¡œ ë°˜í™˜\n     */\n    static getWorkDir(userId: string | number): string {\n        return path.resolve(USER_DATA_ROOT, String(userId), 'workspace');\n    }\n\n    /**\n     * ì‚¬ìš©ìë³„ ë°ì´í„° ë””ë ‰í† ë¦¬ ê²½ë¡œ ë°˜í™˜\n     */\n    static getDataDir(userId: string | number): string {\n        return path.resolve(USER_DATA_ROOT, String(userId), 'data');\n    }\n\n    /**\n     * ì‚¬ìš©ìë³„ ì„ì‹œ íŒŒì¼ ë””ë ‰í† ë¦¬ ê²½ë¡œ ë°˜í™˜\n     */\n    static getTempDir(userId: string | number): string {\n        return path.resolve(USER_DATA_ROOT, String(userId), 'temp');\n    }\n\n    /**\n     * ì‚¬ìš©ì ë””ë ‰í† ë¦¬ ì´ˆê¸°í™” (ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ìƒì„±)\n     */\n    static initUserDirs(userId: string | number): void {\n        const dirs = [\n            this.getWorkDir(userId),\n            this.getDataDir(userId),\n            this.getTempDir(userId)\n        ];\n\n        for (const dir of dirs) {\n            if (!fs.existsSync(dir)) {\n                fs.mkdirSync(dir, { recursive: true });\n                console.log(`[UserSandbox] ë””ë ‰í† ë¦¬ ìƒì„±: ${dir}`);\n            }\n        }\n    }\n\n    /**\n     * ê²½ë¡œ ì ‘ê·¼ ê¶Œí•œ ê²€ì¦\n     * ì‚¬ìš©ìê°€ ìì‹ ì˜ ë””ë ‰í† ë¦¬ ì™¸ë¶€ë¡œ ì ‘ê·¼í•˜ë ¤ëŠ” ì‹œë„ë¥¼ ì°¨ë‹¨\n     * \n     * ğŸ”’ ë³´ì•ˆ ê°•í™”: Path Traversal ê³µê²© ë°©ì–´\n     * - ì‚¬ìš©ì 1ì´ /data/users/10 ì ‘ê·¼ ë°©ì§€ (prefix ìš°íšŒ ì°¨ë‹¨)\n     * - ì •ê·œí™”ëœ ê²½ë¡œ + trailing separator ê²€ì‚¬\n     */\n    static validatePath(userId: string | number, targetPath: string): boolean {\n        const userRoot = path.resolve(USER_DATA_ROOT, String(userId));\n        const resolvedPath = path.resolve(targetPath);\n\n        // ğŸ”’ ë³´ì•ˆ ê°•í™”: trailing separator ì¶”ê°€ë¡œ prefix ìš°íšŒ ë°©ì§€\n        // ì˜ˆ: ì‚¬ìš©ì \"1\"ì˜ userRoot = \"/data/users/1\"\n        // ê³µê²©ìê°€ \"/data/users/10\"ì— ì ‘ê·¼ ì‹œë„ ì‹œ:\n        // - ê¸°ì¡´: \"/data/users/10\".startsWith(\"/data/users/1\") = true (ì·¨ì•½!)\n        // - ìˆ˜ì •: \"/data/users/10/\".startsWith(\"/data/users/1/\") = false (ì•ˆì „!)\n        const userRootWithSep = userRoot + path.sep;\n        const resolvedPathWithSep = resolvedPath + path.sep;\n\n        // ì •í™•íˆ userRootì´ê±°ë‚˜ userRoot í•˜ìœ„ ê²½ë¡œì¸ì§€ í™•ì¸\n        const isExactMatch = resolvedPath === userRoot;\n        const isSubPath = resolvedPathWithSep.startsWith(userRootWithSep);\n\n        if (!isExactMatch && !isSubPath) {\n            console.warn(`[UserSandbox] âš ï¸ ê²½ë¡œ ì ‘ê·¼ ê±°ë¶€: ${resolvedPath} (ì‚¬ìš©ì: ${userId})`);\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * ì‚¬ìš©ì ê²½ë¡œë¥¼ ì•ˆì „í•œ ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜\n     * ìƒëŒ€ ê²½ë¡œëŠ” ì‚¬ìš©ì ì‘ì—… ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ í•´ì„\n     */\n    static resolvePath(userId: string | number, inputPath: string): string | null {\n        // ì ˆëŒ€ ê²½ë¡œì¸ ê²½ìš° ê²€ì¦\n        if (path.isAbsolute(inputPath)) {\n            return this.validatePath(userId, inputPath) ? inputPath : null;\n        }\n\n        // ìƒëŒ€ ê²½ë¡œëŠ” ì‚¬ìš©ì ì‘ì—… ë””ë ‰í† ë¦¬ ê¸°ì¤€\n        const resolved = path.resolve(this.getWorkDir(userId), inputPath);\n        return this.validatePath(userId, resolved) ? resolved : null;\n    }\n\n    /**\n     * ì‚¬ìš©ì ë””ë ‰í† ë¦¬ ì •ë³´ ì¡°íšŒ\n     */\n    static getUserDirInfo(userId: string | number): {\n        workDir: string;\n        dataDir: string;\n        tempDir: string;\n        exists: boolean;\n    } {\n        const workDir = this.getWorkDir(userId);\n        return {\n            workDir,\n            dataDir: this.getDataDir(userId),\n            tempDir: this.getTempDir(userId),\n            exists: fs.existsSync(workDir)\n        };\n    }\n\n    /**\n     * ì‚¬ìš©ì ì„ì‹œ íŒŒì¼ ì •ë¦¬\n     */\n    static cleanupTempDir(userId: string | number): void {\n        const tempDir = this.getTempDir(userId);\n        if (fs.existsSync(tempDir)) {\n            const files = fs.readdirSync(tempDir);\n            for (const file of files) {\n                const filePath = path.join(tempDir, file);\n                fs.unlinkSync(filePath);\n            }\n            console.log(`[UserSandbox] ì„ì‹œ íŒŒì¼ ì •ë¦¬ ì™„ë£Œ: ${userId}`);\n        }\n    }\n\n    // ============================================\n    // User-Specific SQLite DB\n    // ============================================\n\n    /**\n     * ì‚¬ìš©ìë³„ SQLite DB íŒŒì¼ ê²½ë¡œ ë°˜í™˜\n     * ê° ì‚¬ìš©ìëŠ” ë…ë¦½ëœ DBë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ê²©ë¦¬\n     */\n    static getUserDbPath(userId: string | number): string {\n        // ë””ë ‰í† ë¦¬ ì´ˆê¸°í™” (ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ìƒì„±)\n        this.initUserDirs(userId);\n        return path.resolve(USER_DATA_ROOT, String(userId), 'data', 'user.db');\n    }\n\n    /**\n     * ì‚¬ìš©ìë³„ ëŒ€í™” DB íŒŒì¼ ê²½ë¡œ ë°˜í™˜\n     */\n    static getUserConversationDbPath(userId: string | number): string {\n        this.initUserDirs(userId);\n        return path.resolve(USER_DATA_ROOT, String(userId), 'data', 'conversations.db');\n    }\n\n    /**\n     * ì‚¬ìš©ìë³„ ì„¤ì • íŒŒì¼ ê²½ë¡œ ë°˜í™˜\n     */\n    static getUserConfigPath(userId: string | number): string {\n        this.initUserDirs(userId);\n        return path.resolve(USER_DATA_ROOT, String(userId), 'config.json');\n    }\n\n    /**\n     * ì‚¬ìš©ì ì„¤ì • ì €ì¥\n     */\n    static saveUserConfig(userId: string | number, config: Record<string, unknown>): void {\n        const configPath = this.getUserConfigPath(userId);\n        fs.writeFileSync(configPath, JSON.stringify(config, null, 2), 'utf-8');\n        console.log(`[UserSandbox] ì„¤ì • ì €ì¥: ${userId}`);\n    }\n\n    /**\n     * ì‚¬ìš©ì ì„¤ì • ë¡œë“œ\n     */\n    static loadUserConfig(userId: string | number): Record<string, unknown> {\n        const configPath = this.getUserConfigPath(userId);\n        if (fs.existsSync(configPath)) {\n            const data = fs.readFileSync(configPath, 'utf-8');\n            return JSON.parse(data);\n        }\n        return {};\n    }\n\n    /**\n     * ì‚¬ìš©ì ë°ì´í„° ì „ì²´ ì‚­ì œ (ê³„ì • ì‚­ì œ ì‹œ)\n     */\n    static deleteUserData(userId: string | number): boolean {\n        const userRoot = path.resolve(USER_DATA_ROOT, String(userId));\n        if (fs.existsSync(userRoot)) {\n            fs.rmSync(userRoot, { recursive: true, force: true });\n            console.log(`[UserSandbox] ì‚¬ìš©ì ë°ì´í„° ì‚­ì œ: ${userId}`);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * ì‚¬ìš©ì ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ ê³„ì‚°\n     */\n    static getUserDiskUsage(userId: string | number): number {\n        const userRoot = path.resolve(USER_DATA_ROOT, String(userId));\n        if (!fs.existsSync(userRoot)) return 0;\n\n        let totalSize = 0;\n        const countSize = (dirPath: string) => {\n            const items = fs.readdirSync(dirPath);\n            for (const item of items) {\n                const itemPath = path.join(dirPath, item);\n                const stat = fs.statSync(itemPath);\n                if (stat.isDirectory()) {\n                    countSize(itemPath);\n                } else {\n                    totalSize += stat.size;\n                }\n            }\n        };\n        countSize(userRoot);\n        return totalSize;\n    }\n}\n\n/**\n * ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸ ì¸í„°í˜ì´ìŠ¤\n * MCP ìš”ì²­ ì‹œ ì„œë²„ì—ì„œ ê°•ì œ ì£¼ì…\n */\nexport interface UserContext {\n    userId: string | number;\n    tier: 'free' | 'pro' | 'enterprise';\n    role: 'admin' | 'user' | 'guest';\n    orgId?: string;\n}\n\n/**\n * ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸ ìƒì„± (ì„œë²„ì—ì„œë§Œ í˜¸ì¶œ)\n */\nexport function createUserContext(\n    userId: string | number,\n    tier: 'free' | 'pro' | 'enterprise',\n    role: 'admin' | 'user' | 'guest',\n    orgId?: string\n): UserContext {\n    return { userId, tier, role, orgId };\n}\n"],"version":3}