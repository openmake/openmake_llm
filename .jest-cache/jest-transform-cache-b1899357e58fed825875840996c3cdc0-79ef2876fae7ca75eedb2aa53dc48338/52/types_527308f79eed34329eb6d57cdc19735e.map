{"file":"/Volumes/MAC_APP/openmake_llm/backend/api/src/mcp/types.ts","mappings":";AAAA,qCAAqC;;;AAgHrC,oBAAoB;AACP,QAAA,uBAAuB,GAAG,IAAI,CAAC","names":[],"sources":["/Volumes/MAC_APP/openmake_llm/backend/api/src/mcp/types.ts"],"sourcesContent":["// MCP (Model Context Protocol) 타입 정의\n\nimport type { UserContext } from './user-sandbox';\r\n\r\nexport interface MCPRequest {\r\n    jsonrpc: '2.0';\r\n    id: string | number;\r\n    method: string;\r\n    params?: Record<string, unknown>;\r\n}\r\n\r\nexport interface MCPResponse {\r\n    jsonrpc: '2.0';\r\n    id: string | number;\r\n    result?: unknown;\r\n    error?: MCPError;\r\n}\r\n\r\nexport interface MCPError {\r\n    code: number;\r\n    message: string;\r\n    data?: unknown;\r\n}\r\n\r\nexport interface MCPNotification {\r\n    jsonrpc: '2.0';\r\n    method: string;\r\n    params?: Record<string, unknown>;\r\n}\r\n\r\nexport interface MCPTool {\r\n    name: string;\r\n    description: string;\r\n    inputSchema: {\r\n        type: 'object';\r\n        properties: Record<string, unknown>;\r\n        required?: string[];\r\n    };\r\n}\r\n\r\nexport interface MCPToolResult {\r\n    content: Array<{\r\n        type: 'text' | 'image' | 'resource';\r\n        text?: string;\r\n        data?: string;\r\n        mimeType?: string;\r\n    }>;\r\n    isError?: boolean;\r\n}\r\n\r\nexport interface MCPResource {\r\n    uri: string;\r\n    name: string;\r\n    description?: string;\r\n    mimeType?: string;\r\n}\r\n\r\nexport interface MCPServerInfo {\r\n    name: string;\r\n    version: string;\r\n    capabilities: {\r\n        tools?: boolean;\r\n        resources?: boolean;\r\n        prompts?: boolean;\r\n    };\r\n}\r\n\r\nexport type MCPToolHandler<T extends Record<string, unknown> = Record<string, unknown>> = (args: T, context?: UserContext) => Promise<MCPToolResult>;\r\n\r\nexport interface MCPToolDefinition<T extends Record<string, unknown> = Record<string, unknown>> {\n    tool: MCPTool;\n    handler: MCPToolHandler<T>;\n}\n\n// ===== 외부 MCP 서버 관련 타입 =====\n\n/** MCP 서버 전송 방식 */\nexport type MCPTransportType = 'stdio' | 'sse' | 'streamable-http';\n\n/** DB에 저장되는 외부 MCP 서버 설정 */\nexport interface MCPServerConfig {\n    id: string;\n    name: string;                          // 고유 이름 (네임스페이스로 사용)\n    transport_type: MCPTransportType;\n    command?: string;                      // stdio: 실행 명령어\n    args?: string[];                       // stdio: 명령어 인자\n    env?: Record<string, string>;          // stdio: 환경변수\n    url?: string;                          // sse/http: 서버 URL\n    enabled: boolean;\n    created_at: string;\n    updated_at: string;\n}\n\n/** 외부 서버 연결 상태 */\nexport interface MCPConnectionStatus {\n    serverId: string;\n    serverName: string;\n    status: 'disconnected' | 'connecting' | 'connected' | 'error';\n    toolCount: number;\n    lastPing?: string;\n    error?: string;\n}\n\n/** 네임스페이스가 적용된 외부 도구 엔트리 */\nexport interface ExternalToolEntry {\n    serverId: string;\n    serverName: string;\n    originalName: string;\n    namespacedName: string;                // \"serverName::originalName\"\n    tool: MCPTool;\n}\n\n/** 네임스페이스 구분자 상수 */\nexport const MCP_NAMESPACE_SEPARATOR = '::';\n"],"version":3}