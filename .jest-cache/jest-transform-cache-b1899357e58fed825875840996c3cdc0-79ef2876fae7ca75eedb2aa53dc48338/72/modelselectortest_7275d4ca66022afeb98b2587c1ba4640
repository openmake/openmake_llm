3c455ff10ddff665b5cf69ecd4635915
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const bun_test_1 = require("bun:test");
const model_selector_1 = require("../chat/model-selector");
(0, bun_test_1.describe)('Model Selector', () => {
    (0, bun_test_1.describe)('classifyQuery', () => {
        (0, bun_test_1.test)('코딩 질문 분류', () => {
            const result = (0, model_selector_1.classifyQuery)('React 컴포넌트에서 useState 사용법 알려줘');
            (0, bun_test_1.expect)(result.type).toBe('code');
            (0, bun_test_1.expect)(result.confidence).toBeGreaterThan(0);
        });
        (0, bun_test_1.test)('분석 질문 분류', () => {
            const result = (0, model_selector_1.classifyQuery)('이 데이터를 분석해서 인사이트 뽑아줘');
            (0, bun_test_1.expect)(result.type).toBe('analysis');
        });
        (0, bun_test_1.test)('창작 질문 분류', () => {
            const result = (0, model_selector_1.classifyQuery)('판타지 소설 아이디어 좀 브레인스토밍 해줘');
            (0, bun_test_1.expect)(result.type).toBe('creative');
        });
        (0, bun_test_1.test)('비전 질문 분류', () => {
            const result = (0, model_selector_1.classifyQuery)('이 이미지에서 텍스트 추출해줘');
            (0, bun_test_1.expect)(result.type).toBe('vision');
        });
        (0, bun_test_1.test)('수학 질문 분류', () => {
            const result = (0, model_selector_1.classifyQuery)('미적분 문제 풀어줘: ∫x²dx');
            (0, bun_test_1.expect)(result.type).toBe('math');
        });
        (0, bun_test_1.test)('문서 질문 분류', () => {
            const result = (0, model_selector_1.classifyQuery)('이 문서 요약해줘');
            (0, bun_test_1.expect)(result.type).toBe('document');
        });
        (0, bun_test_1.test)('번역 질문 분류', () => {
            const result = (0, model_selector_1.classifyQuery)('이 문장을 영어로 번역해줘');
            (0, bun_test_1.expect)(result.type).toBe('translation');
        });
    });
    (0, bun_test_1.describe)('selectOptimalModel', () => {
        (0, bun_test_1.test)('코딩 질문에 적절한 모델 선택', () => {
            const result = (0, model_selector_1.selectOptimalModel)('Python 함수 작성해줘');
            (0, bun_test_1.expect)(result.queryType).toBe('code');
            (0, bun_test_1.expect)(result.supportsToolCalling).toBe(true);
        });
        (0, bun_test_1.test)('비전 질문에 비전 지원 모델 선택', () => {
            const result = (0, model_selector_1.selectOptimalModel)('이미지 분석해줘', true);
            (0, bun_test_1.expect)(result.queryType).toBe('vision');
            (0, bun_test_1.expect)(result.supportsVision).toBe(true);
        });
    });
    (0, bun_test_1.describe)('checkModelCapability', () => {
        (0, bun_test_1.test)('Gemini 모델 도구 지원 확인', () => {
            (0, bun_test_1.expect)((0, model_selector_1.checkModelCapability)('gemini-3-flash-preview:cloud', 'toolCalling')).toBe(true);
            (0, bun_test_1.expect)((0, model_selector_1.checkModelCapability)('gemini-3-flash-preview:cloud', 'vision')).toBe(true);
        });
        (0, bun_test_1.test)('Qwen Coder 모델 비전 미지원 확인', () => {
            (0, bun_test_1.expect)((0, model_selector_1.checkModelCapability)('qwen3-coder-next:cloud', 'vision')).toBe(false);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1ZvbHVtZXMvTUFDX0FQUC9vcGVubWFrZV9sbG0vYmFja2VuZC9hcGkvc3JjL19fdGVzdHNfXy9tb2RlbC1zZWxlY3Rvci50ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsdUNBQWtEO0FBQ2xELDJEQUFpRztBQUVqRyxJQUFBLG1CQUFRLEVBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO0lBQzVCLElBQUEsbUJBQVEsRUFBQyxlQUFlLEVBQUUsR0FBRyxFQUFFO1FBQzNCLElBQUEsZUFBSSxFQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7WUFDbEIsTUFBTSxNQUFNLEdBQUcsSUFBQSw4QkFBYSxFQUFDLCtCQUErQixDQUFDLENBQUM7WUFDOUQsSUFBQSxpQkFBTSxFQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDakMsSUFBQSxpQkFBTSxFQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFBLGVBQUksRUFBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1lBQ2xCLE1BQU0sTUFBTSxHQUFHLElBQUEsOEJBQWEsRUFBQyxzQkFBc0IsQ0FBQyxDQUFDO1lBQ3JELElBQUEsaUJBQU0sRUFBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3pDLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxlQUFJLEVBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtZQUNsQixNQUFNLE1BQU0sR0FBRyxJQUFBLDhCQUFhLEVBQUMseUJBQXlCLENBQUMsQ0FBQztZQUN4RCxJQUFBLGlCQUFNLEVBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN6QyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsZUFBSSxFQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7WUFDbEIsTUFBTSxN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Q0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL01BQ19BUFAvb3Blbm1ha2VfbGxtL2JhY2tlbmQvYXBpL3NyYy9fX3Rlc3RzX18vbW9kZWwtc2VsZWN0b3IudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZXNjcmliZSwgdGVzdCwgZXhwZWN0IH0gZnJvbSAnYnVuOnRlc3QnO1xuaW1wb3J0IHsgY2xhc3NpZnlRdWVyeSwgc2VsZWN0T3B0aW1hbE1vZGVsLCBjaGVja01vZGVsQ2FwYWJpbGl0eSB9IGZyb20gJy4uL2NoYXQvbW9kZWwtc2VsZWN0b3InO1xuXG5kZXNjcmliZSgnTW9kZWwgU2VsZWN0b3InLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ2NsYXNzaWZ5UXVlcnknLCAoKSA9PiB7XG4gICAgICAgIHRlc3QoJ+y9lOuUqSDsp4jrrLgg67aE66WYJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY2xhc3NpZnlRdWVyeSgnUmVhY3Qg7Lu07Y+s64SM7Yq47JeQ7IScIHVzZVN0YXRlIOyCrOyaqeuylSDslYzroKTspJgnKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQudHlwZSkudG9CZSgnY29kZScpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5jb25maWRlbmNlKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ+u2hOyEnSDsp4jrrLgg67aE66WYJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY2xhc3NpZnlRdWVyeSgn7J20IOuNsOydtO2EsOulvCDrtoTshJ3tlbTshJwg7J247IKs7J207Yq4IOu9keyVhOykmCcpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC50eXBlKS50b0JlKCdhbmFseXNpcycpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCfssL3snpEg7KeI66y4IOu2hOulmCcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNsYXNzaWZ5UXVlcnkoJ+2MkO2DgOyngCDshozshKQg7JWE7J2065SU7Ja0IOyigCDruIzroIjsnbjsiqTthqDrsI0g7ZW07KSYJyk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LnR5cGUpLnRvQmUoJ2NyZWF0aXZlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ+u5hOyghCDsp4jrrLgg67aE66WYJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY2xhc3NpZnlRdWVyeSgn7J20IOydtOuvuOyngOyXkOyEnCDthY3siqTtirgg7LaU7Lac7ZW07KSYJyk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LnR5cGUpLnRvQmUoJ3Zpc2lvbicpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCfsiJjtlZkg7KeI66y4IOu2hOulmCcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNsYXNzaWZ5UXVlcnkoJ+uvuOyggeu2hCDrrLjsoJwg7ZKA7Ja07KSYOiDiiKt4wrJkeCcpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC50eXBlKS50b0JlKCdtYXRoJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ+usuOyEnCDsp4jrrLgg67aE66WYJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY2xhc3NpZnlRdWVyeSgn7J20IOusuOyEnCDsmpTslb3tlbTspJgnKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQudHlwZSkudG9CZSgnZG9jdW1lbnQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgn67KI7JetIOyniOusuCDrtoTrpZgnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjbGFzc2lmeVF1ZXJ5KCfsnbQg66y47J6l7J2EIOyYgeyWtOuhnCDrsojsl63tlbTspJgnKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQudHlwZSkudG9CZSgndHJhbnNsYXRpb24nKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnc2VsZWN0T3B0aW1hbE1vZGVsJywgKCkgPT4ge1xuICAgICAgICB0ZXN0KCfsvZTrlKkg7KeI66y47JeQIOyggeygiO2VnCDrqqjrjbgg7ISg7YOdJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gc2VsZWN0T3B0aW1hbE1vZGVsKCdQeXRob24g7ZWo7IiYIOyekeyEse2VtOykmCcpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5xdWVyeVR5cGUpLnRvQmUoJ2NvZGUnKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3VwcG9ydHNUb29sQ2FsbGluZykudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgn67mE7KCEIOyniOusuOyXkCDruYTsoIQg7KeA7JuQIOuqqOuNuCDshKDtg50nLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBzZWxlY3RPcHRpbWFsTW9kZWwoJ+ydtOuvuOyngCDrtoTshJ3tlbTspJgnLCB0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQucXVlcnlUeXBlKS50b0JlKCd2aXNpb24nKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3VwcG9ydHNWaXNpb24pLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2NoZWNrTW9kZWxDYXBhYmlsaXR5JywgKCkgPT4ge1xuICAgICAgICB0ZXN0KCdHZW1pbmkg66qo6424IOuPhOq1rCDsp4Dsm5Ag7ZmV7J24JywgKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGNoZWNrTW9kZWxDYXBhYmlsaXR5KCdnZW1pbmktMy1mbGFzaC1wcmV2aWV3OmNsb3VkJywgJ3Rvb2xDYWxsaW5nJykpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QoY2hlY2tNb2RlbENhcGFiaWxpdHkoJ2dlbWluaS0zLWZsYXNoLXByZXZpZXc6Y2xvdWQnLCAndmlzaW9uJykpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ1F3ZW4gQ29kZXIg66qo6424IOu5hOyghCDrr7jsp4Dsm5Ag7ZmV7J24JywgKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGNoZWNrTW9kZWxDYXBhYmlsaXR5KCdxd2VuMy1jb2Rlci1uZXh0OmNsb3VkJywgJ3Zpc2lvbicpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==