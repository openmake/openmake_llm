8b0300bfd973a4eb7652031a6593aeb3
"use strict";
/**
 * API 응답 형식 표준화
 *
 * 원본: infrastructure/http/api-response.ts (#24 개선)
 * backend/api 빌드 스코프에서 직접 사용하기 위해 배치
 *
 * @example
 * ```typescript
 * import { success, error, paginated, notFound } from '../utils/api-response';
 *
 * // 성공 응답
 * res.json(success({ user: foundUser }));
 *
 * // 에러 응답
 * res.status(404).json(notFound('사용자'));
 *
 * // 페이지네이션 응답
 * res.json(paginated(items, { page: 1, pageSize: 20, total: 100 }));
 * ```
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.ErrorCodes = void 0;
exports.success = success;
exports.error = error;
exports.paginated = paginated;
exports.badRequest = badRequest;
exports.unauthorized = unauthorized;
exports.forbidden = forbidden;
exports.notFound = notFound;
exports.conflict = conflict;
exports.validationError = validationError;
exports.rateLimited = rateLimited;
exports.internalError = internalError;
exports.serviceUnavailable = serviceUnavailable;
// ===== Common Error Codes =====
exports.ErrorCodes = {
    // 4xx Client Errors
    BAD_REQUEST: 'BAD_REQUEST',
    UNAUTHORIZED: 'UNAUTHORIZED',
    FORBIDDEN: 'FORBIDDEN',
    NOT_FOUND: 'NOT_FOUND',
    CONFLICT: 'CONFLICT',
    VALIDATION_ERROR: 'VALIDATION_ERROR',
    RATE_LIMITED: 'RATE_LIMITED',
    PAYLOAD_TOO_LARGE: 'PAYLOAD_TOO_LARGE',
    // 5xx Server Errors
    INTERNAL_ERROR: 'INTERNAL_ERROR',
    SERVICE_UNAVAILABLE: 'SERVICE_UNAVAILABLE',
    DATABASE_ERROR: 'DATABASE_ERROR',
    EXTERNAL_SERVICE_ERROR: 'EXTERNAL_SERVICE_ERROR',
    // Domain-Specific
    SESSION_NOT_FOUND: 'SESSION_NOT_FOUND',
    USER_EXISTS: 'USER_EXISTS',
    INVALID_CREDENTIALS: 'INVALID_CREDENTIALS',
    TOKEN_EXPIRED: 'TOKEN_EXPIRED',
    MODEL_NOT_AVAILABLE: 'MODEL_NOT_AVAILABLE',
    DOCUMENT_PROCESSING_FAILED: 'DOCUMENT_PROCESSING_FAILED',
};
// ===== Helper Functions =====
/**
 * 성공 응답 생성
 */
function success(data, meta) {
    return {
        success: true,
        data,
        meta: Object.assign({ timestamp: new Date().toISOString() }, meta)
    };
}
/**
 * 에러 응답 생성
 */
function error(code, message, details) {
    const response = {
        success: false,
        error: { code, message },
        meta: {
            timestamp: new Date().toISOString()
        }
    };
    if (details !== undefined) {
        response.error.details = details;
    }
    return response;
}
/**
 * 페이지네이션 응답 생성
 */
function paginated(items, params) {
    const { page, pageSize, total } = params;
    const totalPages = Math.ceil(total / pageSize);
    return {
        success: true,
        data: items,
        pagination: {
            page,
            pageSize,
            total,
            totalPages,
            hasNext: page < totalPages,
            hasPrev: page > 1
        },
        meta: {
            timestamp: new Date().toISOString()
        }
    };
}
// ===== HTTP Status Code Helpers =====
/** 400 Bad Request */
function badRequest(message, details) {
    return error(exports.ErrorCodes.BAD_REQUEST, message, details);
}
/** 401 Unauthorized */
function unauthorized(message = '인증이 필요합니다') {
    return error(exports.ErrorCodes.UNAUTHORIZED, message);
}
/** 403 Forbidden */
function forbidden(message = '권한이 없습니다') {
    return error(exports.ErrorCodes.FORBIDDEN, message);
}
/** 404 Not Found */
function notFound(resource = '리소스') {
    return error(exports.ErrorCodes.NOT_FOUND, `${resource}를 찾을 수 없습니다`);
}
/** 409 Conflict */
function conflict(message) {
    return error(exports.ErrorCodes.CONFLICT, message);
}
/** 422 Validation Error */
function validationError(message, details) {
    return error(exports.ErrorCodes.VALIDATION_ERROR, message, details);
}
/** 429 Rate Limited */
function rateLimited(message = '요청이 너무 많습니다. 잠시 후 다시 시도하세요.') {
    return error(exports.ErrorCodes.RATE_LIMITED, message);
}
/** 500 Internal Error */
function internalError(message = '서버 내부 오류가 발생했습니다') {
    return error(exports.ErrorCodes.INTERNAL_ERROR, message);
}
/** 503 Service Unavailable */
function serviceUnavailable(message = '서비스를 일시적으로 사용할 수 없습니다') {
    return error(exports.ErrorCodes.SERVICE_UNAVAILABLE, message);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1ZvbHVtZXMvTUFDX0FQUC9vcGVubWFrZV9sbG0vYmFja2VuZC9hcGkvc3JjL3V0aWxzL2FwaS1yZXNwb25zZS50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQkc7OztBQWlGSCwwQkFTQztBQUtELHNCQWdCQztBQUtELDhCQXNCQztBQUtELGdDQUVDO0FBR0Qsb0NBRUM7QUFHRCw4QkFFQztBQUdELDRCQUVDO0FBR0QsNEJBRUM7QUFHRCwwQ0FFQztBQUdELGtDQUVDO0FBR0Qsc0NBRUM7QUFHRCxnREFFQztBQTNJRCxpQ0FBaUM7QUFFcEIsUUFBQSxVQUFVLEdBQUc7SUFDdEIsb0JBQW9CO0lBQ3BCLFdBQVcsRUFBRSxhQUFhO0lBQzFCLFlBQVksRUFBRSxjQUFjO0lBQzVCLFNBQVMsRUFBRSxXQUFXO0lBQ3RCLFNBQVMsRUFBRSxXQUFXO0lBQ3RCLFFBQVEsRUFBRSxVQUFVO0lBQ3BCLGdCQUFnQixFQUFFLGtCQUFrQjtJQUNwQyxZQUFZLEVBQUUsY0FBYztJQUM1QixpQkFBaUIsRUFBRSxtQkFBbUI7SUFFdEMsb0JBQW9CO0lBQ3BCLGNBQWMsRUFBRSxnQkFBZ0I7SUFDaEMsbUJBQW1CLEVBQUUscUJBQXFCO0lBQzFDLGNBQWMsRUFBRSxnQkFBZ0I7SUFDaEMsc0JBQXNCLEVBQUUsd0JBQXdCO0lBRWhELGtCQUFrQjtJQUNsQixpQkFBaUIsRUFBRSxtQkFBbUI7SUFDdEMsV0FBVyxFQUFFLGFBQWE7SUFDMUIsbUJBQW1CLEVBQUUscUJBQXFCO0lBQzFDLGFBQWEsRUFBRSxlQUFlO0lBQzlCLG1CQUFtQixFQUFFLHFCQUFxQjtJQUMxQywwQkFBMEIsRUFBRSw0QkFBNEI7Q0FDbEQsQ0FBQztBQUlYLCtCQUErQjtBQUUvQjs7R0FFRztBQUNILFNBQWdCLE9BQU8sQ0FBSSxJQUFPLEVBQUUsSUFBNEI7SUFDNUQsT0FBTztRQUNILE9BQU8sRUFBRSxJQUFJO1FBQ2IsSUFBSTtRQUNKLElBQUksa0JBQ0EsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFLENB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QUM7QUFFRCw4QkFBOEI7QUFDOUIsU0FBZ0Isa0JBQWtCLENBQUMsT0FBTyxHQUFHLHVCQUF1QjtJQUNoRSxPQUFPLEtBQUssQ0FBQyxrQkFBVSxDQUFDLG1CQUFtQixFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQzFELENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1ZvbHVtZXMvTUFDX0FQUC9vcGVubWFrZV9sbG0vYmFja2VuZC9hcGkvc3JjL3V0aWxzL2FwaS1yZXNwb25zZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFQSSDsnZHri7Ug7ZiV7IudIO2RnOykgO2ZlFxuICogXG4gKiDsm5Drs7g6IGluZnJhc3RydWN0dXJlL2h0dHAvYXBpLXJlc3BvbnNlLnRzICgjMjQg6rCc7ISgKVxuICogYmFja2VuZC9hcGkg67mM65OcIOyKpOy9lO2UhOyXkOyEnCDsp4HsoJEg7IKs7Jqp7ZWY6riwIOychO2VtCDrsLDsuZhcbiAqIFxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IHN1Y2Nlc3MsIGVycm9yLCBwYWdpbmF0ZWQsIG5vdEZvdW5kIH0gZnJvbSAnLi4vdXRpbHMvYXBpLXJlc3BvbnNlJztcbiAqIFxuICogLy8g7ISx6rO1IOydkeuLtVxuICogcmVzLmpzb24oc3VjY2Vzcyh7IHVzZXI6IGZvdW5kVXNlciB9KSk7XG4gKiBcbiAqIC8vIOyXkOufrCDsnZHri7VcbiAqIHJlcy5zdGF0dXMoNDA0KS5qc29uKG5vdEZvdW5kKCfsgqzsmqnsnpAnKSk7XG4gKiBcbiAqIC8vIO2OmOydtOyngOuEpOydtOyFmCDsnZHri7VcbiAqIHJlcy5qc29uKHBhZ2luYXRlZChpdGVtcywgeyBwYWdlOiAxLCBwYWdlU2l6ZTogMjAsIHRvdGFsOiAxMDAgfSkpO1xuICogYGBgXG4gKi9cblxuLy8gPT09PT0gVHlwZSBEZWZpbml0aW9ucyA9PT09PVxuXG4vKiog7ZGc7KSAIEFQSSDshLHqs7Ug7J2R64u1ICovXG5leHBvcnQgaW50ZXJmYWNlIEFwaVN1Y2Nlc3NSZXNwb25zZTxUID0gdW5rbm93bj4ge1xuICAgIHN1Y2Nlc3M6IHRydWU7XG4gICAgZGF0YTogVDtcbiAgICBtZXRhPzogUmVzcG9uc2VNZXRhO1xufVxuXG4vKiog7ZGc7KSAIEFQSSDsl5Drn6wg7J2R64u1ICovXG5leHBvcnQgaW50ZXJmYWNlIEFwaUVycm9yUmVzcG9uc2Uge1xuICAgIHN1Y2Nlc3M6IGZhbHNlO1xuICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IHN0cmluZztcbiAgICAgICAgbWVzc2FnZTogc3RyaW5nO1xuICAgICAgICBkZXRhaWxzPzogdW5rbm93bjtcbiAgICB9O1xuICAgIG1ldGE/OiBSZXNwb25zZU1ldGE7XG59XG5cbi8qKiDthrXtlakgQVBJIOydkeuLtSDtg4DsnoUgKi9cbmV4cG9ydCB0eXBlIEFwaVJlc3BvbnNlPFQgPSB1bmtub3duPiA9IEFwaVN1Y2Nlc3NSZXNwb25zZTxUPiB8IEFwaUVycm9yUmVzcG9uc2U7XG5cbi8qKiDsnZHri7Ug66mU7YOA642w7J207YSwICovXG5leHBvcnQgaW50ZXJmYWNlIFJlc3BvbnNlTWV0YSB7XG4gICAgdGltZXN0YW1wOiBzdHJpbmc7XG4gICAgcmVxdWVzdElkPzogc3RyaW5nO1xufVxuXG4vKiog7Y6Y7J207KeA64Sk7J207IWYIOygleuztCAqL1xuZXhwb3J0IGludGVyZmFjZSBQYWdpbmF0aW9uTWV0YSB7XG4gICAgcGFnZTogbnVtYmVyO1xuICAgIHBhZ2VTaXplOiBudW1iZXI7XG4gICAgdG90YWw6IG51bWJlcjtcbiAgICB0b3RhbFBhZ2VzOiBudW1iZXI7XG4gICAgaGFzTmV4dDogYm9vbGVhbjtcbiAgICBoYXNQcmV2OiBib29sZWFuO1xufVxuXG4vKiog7Y6Y7J207KeA64Sk7J207IWYIO2PrO2VqCDsnZHri7UgKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGFnaW5hdGVkUmVzcG9uc2U8VD4gZXh0ZW5kcyBBcGlTdWNjZXNzUmVzcG9uc2U8VFtdPiB7XG4gICAgcGFnaW5hdGlvbjogUGFnaW5hdGlvbk1ldGE7XG59XG5cbi8vID09PT09IENvbW1vbiBFcnJvciBDb2RlcyA9PT09PVxuXG5leHBvcnQgY29uc3QgRXJyb3JDb2RlcyA9IHtcbiAgICAvLyA0eHggQ2xpZW50IEVycm9yc1xuICAgIEJBRF9SRVFVRVNUOiAnQkFEX1JFUVVFU1QnLFxuICAgIFVOQVVUSE9SSVpFRDogJ1VOQVVUSE9SSVpFRCcsXG4gICAgRk9SQklEREVOOiAnRk9SQklEREVOJyxcbiAgICBOT1RfRk9VTkQ6ICdOT1RfRk9VTkQnLFxuICAgIENPTkZMSUNUOiAnQ09ORkxJQ1QnLFxuICAgIFZBTElEQVRJT05fRVJST1I6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICBSQVRFX0xJTUlURUQ6ICdSQVRFX0xJTUlURUQnLFxuICAgIFBBWUxPQURfVE9PX0xBUkdFOiAnUEFZTE9BRF9UT09fTEFSR0UnLFxuXG4gICAgLy8gNXh4IFNlcnZlciBFcnJvcnNcbiAgICBJTlRFUk5BTF9FUlJPUjogJ0lOVEVSTkFMX0VSUk9SJyxcbiAgICBTRVJWSUNFX1VOQVZBSUxBQkxFOiAnU0VSVklDRV9VTkFWQUlMQUJMRScsXG4gICAgREFUQUJBU0VfRVJST1I6ICdEQVRBQkFTRV9FUlJPUicsXG4gICAgRVhURVJOQUxfU0VSVklDRV9FUlJPUjogJ0VYVEVSTkFMX1NFUlZJQ0VfRVJST1InLFxuXG4gICAgLy8gRG9tYWluLVNwZWNpZmljXG4gICAgU0VTU0lPTl9OT1RfRk9VTkQ6ICdTRVNTSU9OX05PVF9GT1VORCcsXG4gICAgVVNFUl9FWElTVFM6ICdVU0VSX0VYSVNUUycsXG4gICAgSU5WQUxJRF9DUkVERU5USUFMUzogJ0lOVkFMSURfQ1JFREVOVElBTFMnLFxuICAgIFRPS0VOX0VYUElSRUQ6ICdUT0tFTl9FWFBJUkVEJyxcbiAgICBNT0RFTF9OT1RfQVZBSUxBQkxFOiAnTU9ERUxfTk9UX0FWQUlMQUJMRScsXG4gICAgRE9DVU1FTlRfUFJPQ0VTU0lOR19GQUlMRUQ6ICdET0NVTUVOVF9QUk9DRVNTSU5HX0ZBSUxFRCcsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBFcnJvckNvZGUgPSB0eXBlb2YgRXJyb3JDb2Rlc1trZXlvZiB0eXBlb2YgRXJyb3JDb2Rlc107XG5cbi8vID09PT09IEhlbHBlciBGdW5jdGlvbnMgPT09PT1cblxuLyoqXG4gKiDshLHqs7Ug7J2R64u1IOyDneyEsVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3VjY2VzczxUPihkYXRhOiBULCBtZXRhPzogUGFydGlhbDxSZXNwb25zZU1ldGE+KTogQXBpU3VjY2Vzc1Jlc3BvbnNlPFQ+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhLFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIC4uLm1ldGFcbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKlxuICog7JeQ65+sIOydkeuLtSDsg53shLFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVycm9yKFxuICAgIGNvZGU6IHN0cmluZyxcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgZGV0YWlscz86IHVua25vd25cbik6IEFwaUVycm9yUmVzcG9uc2Uge1xuICAgIGNvbnN0IHJlc3BvbnNlOiBBcGlFcnJvclJlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHsgY29kZSwgbWVzc2FnZSB9LFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAoZGV0YWlscyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJlc3BvbnNlLmVycm9yLmRldGFpbHMgPSBkZXRhaWxzO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2U7XG59XG5cbi8qKlxuICog7Y6Y7J207KeA64Sk7J207IWYIOydkeuLtSDsg53shLFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhZ2luYXRlZDxUPihcbiAgICBpdGVtczogVFtdLFxuICAgIHBhcmFtczogeyBwYWdlOiBudW1iZXI7IHBhZ2VTaXplOiBudW1iZXI7IHRvdGFsOiBudW1iZXIgfVxuKTogUGFnaW5hdGVkUmVzcG9uc2U8VD4ge1xuICAgIGNvbnN0IHsgcGFnZSwgcGFnZVNpemUsIHRvdGFsIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbCh0b3RhbCAvIHBhZ2VTaXplKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IGl0ZW1zLFxuICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgICBwYWdlLFxuICAgICAgICAgICAgcGFnZVNpemUsXG4gICAgICAgICAgICB0b3RhbCxcbiAgICAgICAgICAgIHRvdGFsUGFnZXMsXG4gICAgICAgICAgICBoYXNOZXh0OiBwYWdlIDwgdG90YWxQYWdlcyxcbiAgICAgICAgICAgIGhhc1ByZXY6IHBhZ2UgPiAxXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyA9PT09PSBIVFRQIFN0YXR1cyBDb2RlIEhlbHBlcnMgPT09PT1cblxuLyoqIDQwMCBCYWQgUmVxdWVzdCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJhZFJlcXVlc3QobWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzPzogdW5rbm93bik6IEFwaUVycm9yUmVzcG9uc2Uge1xuICAgIHJldHVybiBlcnJvcihFcnJvckNvZGVzLkJBRF9SRVFVRVNULCBtZXNzYWdlLCBkZXRhaWxzKTtcbn1cblxuLyoqIDQwMSBVbmF1dGhvcml6ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmF1dGhvcml6ZWQobWVzc2FnZSA9ICfsnbjspp3snbQg7ZWE7JqU7ZWp64uI64ukJyk6IEFwaUVycm9yUmVzcG9uc2Uge1xuICAgIHJldHVybiBlcnJvcihFcnJvckNvZGVzLlVOQVVUSE9SSVpFRCwgbWVzc2FnZSk7XG59XG5cbi8qKiA0MDMgRm9yYmlkZGVuICovXG5leHBvcnQgZnVuY3Rpb24gZm9yYmlkZGVuKG1lc3NhZ2UgPSAn6raM7ZWc7J20IOyXhuyKteuLiOuLpCcpOiBBcGlFcnJvclJlc3BvbnNlIHtcbiAgICByZXR1cm4gZXJyb3IoRXJyb3JDb2Rlcy5GT1JCSURERU4sIG1lc3NhZ2UpO1xufVxuXG4vKiogNDA0IE5vdCBGb3VuZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vdEZvdW5kKHJlc291cmNlID0gJ+umrOyGjOyKpCcpOiBBcGlFcnJvclJlc3BvbnNlIHtcbiAgICByZXR1cm4gZXJyb3IoRXJyb3JDb2Rlcy5OT1RfRk9VTkQsIGAke3Jlc291cmNlfeulvCDssL7snYQg7IiYIOyXhuyKteuLiOuLpGApO1xufVxuXG4vKiogNDA5IENvbmZsaWN0ICovXG5leHBvcnQgZnVuY3Rpb24gY29uZmxpY3QobWVzc2FnZTogc3RyaW5nKTogQXBpRXJyb3JSZXNwb25zZSB7XG4gICAgcmV0dXJuIGVycm9yKEVycm9yQ29kZXMuQ09ORkxJQ1QsIG1lc3NhZ2UpO1xufVxuXG4vKiogNDIyIFZhbGlkYXRpb24gRXJyb3IgKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3IobWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzPzogdW5rbm93bik6IEFwaUVycm9yUmVzcG9uc2Uge1xuICAgIHJldHVybiBlcnJvcihFcnJvckNvZGVzLlZBTElEQVRJT05fRVJST1IsIG1lc3NhZ2UsIGRldGFpbHMpO1xufVxuXG4vKiogNDI5IFJhdGUgTGltaXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhdGVMaW1pdGVkKG1lc3NhZ2UgPSAn7JqU7LKt7J20IOuEiOustCDrp47sirXri4jri6QuIOyeoOyLnCDtm4Qg64uk7IucIOyLnOuPhO2VmOyEuOyalC4nKTogQXBpRXJyb3JSZXNwb25zZSB7XG4gICAgcmV0dXJuIGVycm9yKEVycm9yQ29kZXMuUkFURV9MSU1JVEVELCBtZXNzYWdlKTtcbn1cblxuLyoqIDUwMCBJbnRlcm5hbCBFcnJvciAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVybmFsRXJyb3IobWVzc2FnZSA9ICfshJzrsoQg64K067aAIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QnKTogQXBpRXJyb3JSZXNwb25zZSB7XG4gICAgcmV0dXJuIGVycm9yKEVycm9yQ29kZXMuSU5URVJOQUxfRVJST1IsIG1lc3NhZ2UpO1xufVxuXG4vKiogNTAzIFNlcnZpY2UgVW5hdmFpbGFibGUgKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXJ2aWNlVW5hdmFpbGFibGUobWVzc2FnZSA9ICfshJzruYTsiqTrpbwg7J287Iuc7KCB7Jy866GcIOyCrOyaqe2VoCDsiJgg7JeG7Iq164uI64ukJyk6IEFwaUVycm9yUmVzcG9uc2Uge1xuICAgIHJldHVybiBlcnJvcihFcnJvckNvZGVzLlNFUlZJQ0VfVU5BVkFJTEFCTEUsIG1lc3NhZ2UpO1xufVxuIl0sInZlcnNpb24iOjN9