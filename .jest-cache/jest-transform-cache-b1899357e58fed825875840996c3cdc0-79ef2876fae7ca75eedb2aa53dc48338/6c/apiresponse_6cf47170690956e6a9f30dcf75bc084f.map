{"file":"/Volumes/MAC_APP/openmake_llm/backend/api/src/utils/api-response.ts","mappings":"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","names":[],"sources":["/Volumes/MAC_APP/openmake_llm/backend/api/src/utils/api-response.ts"],"sourcesContent":["/**\n * API 응답 형식 표준화\n * \n * 원본: infrastructure/http/api-response.ts (#24 개선)\n * backend/api 빌드 스코프에서 직접 사용하기 위해 배치\n * \n * @example\n * ```typescript\n * import { success, error, paginated, notFound } from '../utils/api-response';\n * \n * // 성공 응답\n * res.json(success({ user: foundUser }));\n * \n * // 에러 응답\n * res.status(404).json(notFound('사용자'));\n * \n * // 페이지네이션 응답\n * res.json(paginated(items, { page: 1, pageSize: 20, total: 100 }));\n * ```\n */\n\n// ===== Type Definitions =====\n\n/** 표준 API 성공 응답 */\nexport interface ApiSuccessResponse<T = unknown> {\n    success: true;\n    data: T;\n    meta?: ResponseMeta;\n}\n\n/** 표준 API 에러 응답 */\nexport interface ApiErrorResponse {\n    success: false;\n    error: {\n        code: string;\n        message: string;\n        details?: unknown;\n    };\n    meta?: ResponseMeta;\n}\n\n/** 통합 API 응답 타입 */\nexport type ApiResponse<T = unknown> = ApiSuccessResponse<T> | ApiErrorResponse;\n\n/** 응답 메타데이터 */\nexport interface ResponseMeta {\n    timestamp: string;\n    requestId?: string;\n}\n\n/** 페이지네이션 정보 */\nexport interface PaginationMeta {\n    page: number;\n    pageSize: number;\n    total: number;\n    totalPages: number;\n    hasNext: boolean;\n    hasPrev: boolean;\n}\n\n/** 페이지네이션 포함 응답 */\nexport interface PaginatedResponse<T> extends ApiSuccessResponse<T[]> {\n    pagination: PaginationMeta;\n}\n\n// ===== Common Error Codes =====\n\nexport const ErrorCodes = {\n    // 4xx Client Errors\n    BAD_REQUEST: 'BAD_REQUEST',\n    UNAUTHORIZED: 'UNAUTHORIZED',\n    FORBIDDEN: 'FORBIDDEN',\n    NOT_FOUND: 'NOT_FOUND',\n    CONFLICT: 'CONFLICT',\n    VALIDATION_ERROR: 'VALIDATION_ERROR',\n    RATE_LIMITED: 'RATE_LIMITED',\n    PAYLOAD_TOO_LARGE: 'PAYLOAD_TOO_LARGE',\n\n    // 5xx Server Errors\n    INTERNAL_ERROR: 'INTERNAL_ERROR',\n    SERVICE_UNAVAILABLE: 'SERVICE_UNAVAILABLE',\n    DATABASE_ERROR: 'DATABASE_ERROR',\n    EXTERNAL_SERVICE_ERROR: 'EXTERNAL_SERVICE_ERROR',\n\n    // Domain-Specific\n    SESSION_NOT_FOUND: 'SESSION_NOT_FOUND',\n    USER_EXISTS: 'USER_EXISTS',\n    INVALID_CREDENTIALS: 'INVALID_CREDENTIALS',\n    TOKEN_EXPIRED: 'TOKEN_EXPIRED',\n    MODEL_NOT_AVAILABLE: 'MODEL_NOT_AVAILABLE',\n    DOCUMENT_PROCESSING_FAILED: 'DOCUMENT_PROCESSING_FAILED',\n} as const;\n\nexport type ErrorCode = typeof ErrorCodes[keyof typeof ErrorCodes];\n\n// ===== Helper Functions =====\n\n/**\n * 성공 응답 생성\n */\nexport function success<T>(data: T, meta?: Partial<ResponseMeta>): ApiSuccessResponse<T> {\n    return {\n        success: true,\n        data,\n        meta: {\n            timestamp: new Date().toISOString(),\n            ...meta\n        }\n    };\n}\n\n/**\n * 에러 응답 생성\n */\nexport function error(\n    code: string,\n    message: string,\n    details?: unknown\n): ApiErrorResponse {\n    const response: ApiErrorResponse = {\n        success: false,\n        error: { code, message },\n        meta: {\n            timestamp: new Date().toISOString()\n        }\n    };\n    if (details !== undefined) {\n        response.error.details = details;\n    }\n    return response;\n}\n\n/**\n * 페이지네이션 응답 생성\n */\nexport function paginated<T>(\n    items: T[],\n    params: { page: number; pageSize: number; total: number }\n): PaginatedResponse<T> {\n    const { page, pageSize, total } = params;\n    const totalPages = Math.ceil(total / pageSize);\n\n    return {\n        success: true,\n        data: items,\n        pagination: {\n            page,\n            pageSize,\n            total,\n            totalPages,\n            hasNext: page < totalPages,\n            hasPrev: page > 1\n        },\n        meta: {\n            timestamp: new Date().toISOString()\n        }\n    };\n}\n\n// ===== HTTP Status Code Helpers =====\n\n/** 400 Bad Request */\nexport function badRequest(message: string, details?: unknown): ApiErrorResponse {\n    return error(ErrorCodes.BAD_REQUEST, message, details);\n}\n\n/** 401 Unauthorized */\nexport function unauthorized(message = '인증이 필요합니다'): ApiErrorResponse {\n    return error(ErrorCodes.UNAUTHORIZED, message);\n}\n\n/** 403 Forbidden */\nexport function forbidden(message = '권한이 없습니다'): ApiErrorResponse {\n    return error(ErrorCodes.FORBIDDEN, message);\n}\n\n/** 404 Not Found */\nexport function notFound(resource = '리소스'): ApiErrorResponse {\n    return error(ErrorCodes.NOT_FOUND, `${resource}를 찾을 수 없습니다`);\n}\n\n/** 409 Conflict */\nexport function conflict(message: string): ApiErrorResponse {\n    return error(ErrorCodes.CONFLICT, message);\n}\n\n/** 422 Validation Error */\nexport function validationError(message: string, details?: unknown): ApiErrorResponse {\n    return error(ErrorCodes.VALIDATION_ERROR, message, details);\n}\n\n/** 429 Rate Limited */\nexport function rateLimited(message = '요청이 너무 많습니다. 잠시 후 다시 시도하세요.'): ApiErrorResponse {\n    return error(ErrorCodes.RATE_LIMITED, message);\n}\n\n/** 500 Internal Error */\nexport function internalError(message = '서버 내부 오류가 발생했습니다'): ApiErrorResponse {\n    return error(ErrorCodes.INTERNAL_ERROR, message);\n}\n\n/** 503 Service Unavailable */\nexport function serviceUnavailable(message = '서비스를 일시적으로 사용할 수 없습니다'): ApiErrorResponse {\n    return error(ErrorCodes.SERVICE_UNAVAILABLE, message);\n}\n"],"version":3}