{"file":"/Volumes/MAC_APP/openmake_llm/backend/api/src/ollama/api-key-manager.ts","mappings":"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","names":[],"sources":["/Volumes/MAC_APP/openmake_llm/backend/api/src/ollama/api-key-manager.ts"],"sourcesContent":["/**\n * API Key Manager with Automatic Multi-Key Rotation\n * üÜï Î¨¥Ï†úÌïú API ÌÇ§ ÏûêÎèô ÏàúÌôò Î°úÏßÅ (OLLAMA_API_KEY_1, _2, _3, ... _N)\n */\n\nexport interface ApiKeyConfig {\n    keys: string[];\n    sshKey?: string;\n}\n\nexport class ApiKeyManager {\n    private keys: string[] = [];\n    private currentKeyIndex = 0;\n    private sshKey: string | undefined;\n    private failureCount = 0;\n    private readonly maxFailures = 2;  // Îçî Îπ†Î•∏ Ïä§ÏôÄÌïë\n    private lastFailoverTime: Date | null = null;\n    private keyFailures: Map<number, { count: number; lastFail: Date }> = new Map();\n\n    constructor(config?: Partial<ApiKeyConfig>) {\n        // üÜï ÌôòÍ≤ΩÎ≥ÄÏàòÏóêÏÑú ÎèôÏ†ÅÏúºÎ°ú Î™®Îì† API ÌÇ§ Î°úÎìú (OLLAMA_API_KEY_1, _2, _3, ... _N)\n        if (config?.keys && config.keys.length > 0) {\n            this.keys = config.keys.filter(k => k && k.trim() !== '');\n        } else {\n            this.keys = this.loadKeysFromEnv();\n        }\n\n        this.sshKey = config?.sshKey || process.env.OLLAMA_SSH_KEY;\n\n        console.log(`[ApiKeyManager] üîë Ï¥àÍ∏∞ÌôîÎê® - ${this.keys.length}Í∞ú API ÌÇ§ Îì±Î°ù`);\n        this.keys.forEach((key, idx) => {\n            const masked = key.substring(0, 8) + '...' + key.substring(key.length - 4);\n            console.log(`[ApiKeyManager]   Key ${idx + 1}: ${masked}`);\n        });\n        console.log(`[ApiKeyManager] SSH Key: ${this.sshKey ? 'ÏÑ§Ï†ïÎê®' : 'ÏóÜÏùå'}`);\n    }\n\n    /**\n     * üÜï ÌôòÍ≤ΩÎ≥ÄÏàòÏóêÏÑú ÎèôÏ†ÅÏúºÎ°ú API ÌÇ§ Î°úÎìú\n     * OLLAMA_API_KEY_1, OLLAMA_API_KEY_2, ... OLLAMA_API_KEY_N ÏàúÏÑúÎ°ú ÌÉêÏÉâ\n     * Î†àÍ±∞Ïãú ÏßÄÏõê: OLLAMA_API_KEY_PRIMARY, OLLAMA_API_KEY_SECONDARY\n     */\n    private loadKeysFromEnv(): string[] {\n        const keys: string[] = [];\n\n        // ÏÉàÎ°úÏö¥ ÌòïÏãù: OLLAMA_API_KEY_1, _2, _3, ... (Î¨¥Ï†úÌïú)\n        let index = 1;\n        while (true) {\n            const key = process.env[`OLLAMA_API_KEY_${index}`];\n            if (key && key.trim() !== '') {\n                keys.push(key.trim());\n                index++;\n            } else {\n                break;\n            }\n        }\n\n        // Î†àÍ±∞Ïãú ÌòïÏãù ÏßÄÏõê (ÏÉà ÌòïÏãùÏóê ÌÇ§Í∞Ä ÏóÜÏùÑ ÎïåÎßå)\n        if (keys.length === 0) {\n            const primary = process.env.OLLAMA_API_KEY_PRIMARY || process.env.OLLAMA_API_KEY;\n            const secondary = process.env.OLLAMA_API_KEY_SECONDARY;\n\n            if (primary && primary.trim() !== '') keys.push(primary.trim());\n            if (secondary && secondary.trim() !== '') keys.push(secondary.trim());\n        }\n\n        return keys;\n    }\n\n    /**\n     * ÌòÑÏû¨ ÏÇ¨Ïö©Ìï† API ÌÇ§ Î∞òÌôò\n     */\n    getCurrentKey(): string {\n        if (this.keys.length === 0) return '';\n        return this.keys[this.currentKeyIndex];\n    }\n\n    /**\n     * ÌòÑÏû¨ ÌÇ§ Ïù∏Îç±Ïä§ Î∞òÌôò\n     */\n    getCurrentKeyIndex(): number {\n        return this.currentKeyIndex;\n    }\n\n    /**\n     * Ï†ÑÏ≤¥ ÌÇ§ Í∞úÏàò Î∞òÌôò\n     */\n    getTotalKeys(): number {\n        return this.keys.length;\n    }\n\n    /**\n     * API ÌÇ§Í∞Ä ÏÑ§Ï†ïÎêòÏñ¥ ÏûàÎäîÏßÄ ÌôïÏù∏\n     */\n    hasValidKey(): boolean {\n        return this.keys.length > 0;\n    }\n\n    /**\n     * SSH ÌÇ§ Î∞òÌôò\n     */\n    getSshKey(): string | undefined {\n        return this.sshKey;\n    }\n\n    /**\n     * ÏöîÏ≤≠ ÏÑ±Í≥µ Ïãú Ìò∏Ï∂ú\n     */\n    reportSuccess(): void {\n        this.failureCount = 0;\n        // ÌòÑÏû¨ ÌÇ§Ïùò Ïã§Ìå® Í∏∞Î°ù Ï¥àÍ∏∞Ìôî\n        this.keyFailures.delete(this.currentKeyIndex);\n    }\n\n    /**\n     * ÏöîÏ≤≠ Ïã§Ìå® Ïãú Ìò∏Ï∂ú - ÏûêÎèô Î°úÌÖåÏù¥ÏÖò Ï≤òÎ¶¨\n     */\n    reportFailure(error?: any): boolean {\n        this.failureCount++;\n        const errorCode = error?.response?.status || error?.code || 'unknown';\n\n        // ÌòÑÏû¨ ÌÇ§Ïùò Ïã§Ìå® Í∏∞Î°ù ÏóÖÎç∞Ïù¥Ìä∏\n        const currentFailure = this.keyFailures.get(this.currentKeyIndex) || { count: 0, lastFail: new Date() };\n        currentFailure.count++;\n        currentFailure.lastFail = new Date();\n        this.keyFailures.set(this.currentKeyIndex, currentFailure);\n\n        const masked = this.getCurrentKey().substring(0, 8) + '...';\n        console.warn(`[ApiKeyManager] ‚ö†Ô∏è Key ${this.currentKeyIndex + 1} (${masked}) Ïã§Ìå® - ÏΩîÎìú: ${errorCode}`);\n\n        // Ïù∏Ï¶ù Í¥ÄÎ†® ÏóêÎü¨Ïù∏ Í≤ΩÏö∞ Ï¶âÏãú Îã§Ïùå ÌÇ§Î°ú Ï†ÑÌôò\n        const isAuthError = errorCode === 401 || errorCode === 403 || errorCode === 429;\n\n        if (this.failureCount >= this.maxFailures || isAuthError) {\n            return this.rotateToNextKey();\n        }\n\n        return false;\n    }\n\n    /**\n     * Îã§Ïùå ÌÇ§Î°ú ÏàúÌôò\n     */\n    private rotateToNextKey(): boolean {\n        if (this.keys.length <= 1) {\n            console.error(`[ApiKeyManager] ‚ùå ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Îã§Î•∏ ÌÇ§Í∞Ä ÏóÜÏäµÎãàÎã§.`);\n            return false;\n        }\n\n        const previousIndex = this.currentKeyIndex;\n\n        // ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Îã§Ïùå ÌÇ§ Ï∞æÍ∏∞ (ÏµúÍ∑º Ïã§Ìå® Í∏∞Î°ùÏù¥ ÏóÜÎäî ÌÇ§ Ïö∞ÏÑ†)\n        let nextIndex = (this.currentKeyIndex + 1) % this.keys.length;\n        let attempts = 0;\n\n        while (attempts < this.keys.length) {\n            const failureRecord = this.keyFailures.get(nextIndex);\n\n            // Ïã§Ìå® Í∏∞Î°ùÏù¥ ÏóÜÍ±∞ÎÇò 5Î∂Ñ Ïù¥ÏÉÅ ÏßÄÎÇú ÌÇ§ Ï∞æÍ∏∞\n            if (!failureRecord || (Date.now() - failureRecord.lastFail.getTime() > 5 * 60 * 1000)) {\n                break;\n            }\n\n            nextIndex = (nextIndex + 1) % this.keys.length;\n            attempts++;\n        }\n\n        this.currentKeyIndex = nextIndex;\n        this.failureCount = 0;\n        this.lastFailoverTime = new Date();\n\n        const previousMasked = this.keys[previousIndex].substring(0, 8) + '...';\n        const newMasked = this.getCurrentKey().substring(0, 8) + '...';\n        console.log(`[ApiKeyManager] üîÑ ÌÇ§ Ï†ÑÌôò: Key ${previousIndex + 1} (${previousMasked}) ‚Üí Key ${nextIndex + 1} (${newMasked})`);\n\n        return true;\n    }\n\n    /**\n     * Ï≤´ Î≤àÏß∏ ÌÇ§Î°ú Î¶¨ÏÖã\n     */\n    reset(): void {\n        this.currentKeyIndex = 0;\n        this.failureCount = 0;\n        this.lastFailoverTime = null;\n        this.keyFailures.clear();\n        console.log(`[ApiKeyManager] üîÑ Key 1ÏúºÎ°ú Î¶¨ÏÖãÎê®`);\n    }\n\n    /**\n     * ÌòÑÏû¨ ÏÉÅÌÉú Ï°∞Ìöå\n     */\n    getStatus(): {\n        activeKeyIndex: number;\n        totalKeys: number;\n        failures: number;\n        lastFailover: Date | null;\n        keyStatuses: { index: number; failCount: number; lastFail: Date | null }[];\n    } {\n        const keyStatuses = this.keys.map((_, idx) => {\n            const failure = this.keyFailures.get(idx);\n            return {\n                index: idx,\n                failCount: failure?.count || 0,\n                lastFail: failure?.lastFail || null\n            };\n        });\n\n        return {\n            activeKeyIndex: this.currentKeyIndex,\n            totalKeys: this.keys.length,\n            failures: this.failureCount,\n            lastFailover: this.lastFailoverTime,\n            keyStatuses\n        };\n    }\n\n    /**\n     * Authorization Ìó§Îçî ÏÉùÏÑ±\n     */\n    getAuthHeaders(): Record<string, string> {\n        const key = this.getCurrentKey();\n        if (!key) return {};\n\n        return {\n            'Authorization': `Bearer ${key}`\n        };\n    }\n}\n\n// Ïã±Í∏ÄÌÜ§ Ïù∏Ïä§ÌÑ¥Ïä§\nlet apiKeyManager: ApiKeyManager | null = null;\n\nexport function getApiKeyManager(): ApiKeyManager {\n    if (!apiKeyManager) {\n        apiKeyManager = new ApiKeyManager();\n    }\n    return apiKeyManager;\n}\n\nexport function resetApiKeyManager(): void {\n    apiKeyManager = null;\n}\n"],"version":3}