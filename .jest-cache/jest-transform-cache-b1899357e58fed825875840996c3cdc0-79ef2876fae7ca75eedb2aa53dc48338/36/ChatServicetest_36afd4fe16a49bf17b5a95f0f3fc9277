70f6d8345e4e9741bfd207fd65bc5574
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
describe('ChatService Types', () => {
    describe('ChatHistoryMessage', () => {
        it('should allow valid user message', () => {
            const msg = {
                role: 'user',
                content: 'Hello world'
            };
            expect(msg.role).toBe('user');
            expect(msg.content).toBe('Hello world');
        });
        it('should allow assistant message with tool_calls', () => {
            const msg = {
                role: 'assistant',
                content: '',
                tool_calls: [{
                        type: 'function',
                        function: {
                            name: 'test_tool',
                            arguments: { arg1: 'value' }
                        }
                    }]
            };
            expect(msg.tool_calls).toHaveLength(1);
            expect(msg.tool_calls[0].function.name).toBe('test_tool');
        });
        it('should allow message with images', () => {
            const msg = {
                role: 'user',
                content: 'Check this image',
                images: ['base64data']
            };
            expect(msg.images).toHaveLength(1);
        });
        it('should allow system message', () => {
            const msg = {
                role: 'system',
                content: 'You are a helpful assistant'
            };
            expect(msg.role).toBe('system');
            expect(msg.content).toBe('You are a helpful assistant');
        });
        it('should allow tool message', () => {
            const msg = {
                role: 'tool',
                content: 'Tool result'
            };
            expect(msg.role).toBe('tool');
            expect(msg.content).toBe('Tool result');
        });
        it('should allow message with multiple images', () => {
            const msg = {
                role: 'user',
                content: 'Compare these images',
                images: ['image1', 'image2', 'image3']
            };
            expect(msg.images).toHaveLength(3);
        });
        it('should allow message with string arguments in tool_calls', () => {
            const msg = {
                role: 'assistant',
                content: '',
                tool_calls: [{
                        type: 'function',
                        function: {
                            name: 'search',
                            arguments: '{"query": "test"}'
                        }
                    }]
            };
            expect(typeof msg.tool_calls[0].function.arguments).toBe('string');
        });
        it('should allow additional properties via index signature', () => {
            const msg = {
                role: 'user',
                content: 'Test',
                customField: 'custom value',
                anotherField: 123
            };
            expect(msg.customField).toBe('custom value');
            expect(msg.anotherField).toBe(123);
        });
    });
    describe('AgentSelectionInfo', () => {
        it('should represent agent selection', () => {
            const info = {
                type: 'code_expert',
                name: 'Code Expert',
                emoji: 'ðŸ‘¨â€ðŸ’»',
                confidence: 0.95,
                reason: 'Code-related query detected'
            };
            expect(info.type).toBe('code_expert');
            expect(info.confidence).toBe(0.95);
        });
        it('should allow partial agent selection info', () => {
            const info = {
                type: 'researcher'
            };
            expect(info.type).toBe('researcher');
            expect(info.name).toBeUndefined();
        });
        it('should allow phase property', () => {
            const info = {
                type: 'agent',
                phase: 'analysis'
            };
            expect(info.phase).toBe('analysis');
        });
        it('should allow additional properties', () => {
            const info = {
                type: 'expert',
                customProp: 'value'
            };
            expect(info.customProp).toBe('value');
        });
    });
    describe('ToolCallInfo', () => {
        it('should represent tool call structure', () => {
            const tool = {
                type: 'function',
                function: {
                    name: 'web_search',
                    arguments: { query: 'test query' }
                }
            };
            expect(tool.function.name).toBe('web_search');
        });
        it('should allow tool call without type', () => {
            const tool = {
                function: {
                    name: 'calculator',
                    arguments: { operation: 'add', a: 1, b: 2 }
                }
            };
            expect(tool.function.name).toBe('calculator');
            expect(tool.function.arguments.a).toBe(1);
        });
        it('should handle complex arguments', () => {
            const tool = {
                type: 'function',
                function: {
                    name: 'complex_tool',
                    arguments: {
                        nested: { deep: { value: 'test' } },
                        array: [1, 2, 3],
                        string: 'value'
                    }
                }
            };
            expect(tool.function.arguments.nested.deep.value).toBe('test');
            expect(tool.function.arguments.array).toHaveLength(3);
        });
    });
    describe('WebSearchResult', () => {
        it('should represent search result', () => {
            const result = {
                title: 'Test Page',
                url: 'https://example.com',
                snippet: 'A test snippet'
            };
            expect(result.title).toBe('Test Page');
            expect(result.url).toBe('https://example.com');
        });
        it('should allow result without snippet', () => {
            const result = {
                title: 'Another Page',
                url: 'https://another.com'
            };
            expect(result.title).toBe('Another Page');
            expect(result.snippet).toBeUndefined();
        });
        it('should handle URLs with query parameters', () => {
            const result = {
                title: 'Search Results',
                url: 'https://example.com/search?q=test&lang=en',
                snippet: 'Results for test'
            };
            expect(result.url).toContain('?q=test');
        });
        it('should handle long snippets', () => {
            const longSnippet = 'A'.repeat(500);
            const result = {
                title: 'Long Result',
                url: 'https://example.com',
                snippet: longSnippet
            };
            expect(result.snippet).toHaveLength(500);
        });
    });
    describe('Type Compatibility', () => {
        it('should allow ChatHistoryMessage array', () => {
            const messages = [
                { role: 'user', content: 'Hello' },
                { role: 'assistant', content: 'Hi there' }
            ];
            expect(messages).toHaveLength(2);
            expect(messages[0].role).toBe('user');
        });
        it('should allow WebSearchResult array', () => {
            const results = [
                { title: 'Result 1', url: 'https://example1.com' },
                { title: 'Result 2', url: 'https://example2.com', snippet: 'Snippet' }
            ];
            expect(results).toHaveLength(2);
        });
        it('should allow mixed tool_calls in messages', () => {
            const messages = [
                {
                    role: 'assistant',
                    content: 'I will search',
                    tool_calls: [
                        {
                            type: 'function',
                            function: { name: 'search', arguments: { query: 'test' } }
                        }
                    ]
                },
                {
                    role: 'tool',
                    content: 'Search results'
                }
            ];
            expect(messages).toHaveLength(2);
            expect(messages[0].tool_calls).toBeDefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1ZvbHVtZXMvTUFDX0FQUC9vcGVubWFrZV9sbG0vYmFja2VuZC9hcGkvc3JjL19fdGVzdHNfXy9DaGF0U2VydmljZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBTUEsUUFBUSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRTtJQUMvQixRQUFRLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFO1FBQ2hDLEVBQUUsQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7WUFDdkMsTUFBTSxHQUFHLEdBQXVCO2dCQUM1QixJQUFJLEVBQUUsTUFBTTtnQkFDWixPQUFPLEVBQUUsYUFBYTthQUN6QixDQUFDO1lBQ0YsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDNUMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsZ0RBQWdELEVBQUUsR0FBRyxFQUFFO1lBQ3RELE1BQU0sR0FBRyxHQUF1QjtnQkFDNUIsSUFBSSxFQUFFLFdBQVc7Z0JBQ2pCLE9BQU8sRUFBRSxFQUFFO2dCQUNYLFVBQVUsRUFBRSxDQUFDO3dCQUNULElBQUksRUFBRSxVQUFVO3dCQUNoQixRQUFRLEVBQUU7NEJBQ04sSUFBSSxFQUFFLFdBQVc7NEJBQ2pCLFNBQVMsRUFBRSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUU7eUJBQy9CO3FCQUNKLENBQUM7YUFDTCxDQUFDO1lBQ0YsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMvRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxrQ0FB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LENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLG9DQUFvQyxFQUFFLEdBQUcsRUFBRTtZQUMxQyxNQUFNLE9BQU8sR0FBc0I7Z0JBQy9CLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUUsc0JBQXNCLEVBQUU7Z0JBQ2xELEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUUsc0JBQXNCLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRTthQUN6RSxDQUFDO1lBQ0YsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQywyQ0FBMkMsRUFBRSxHQUFHLEVBQUU7WUFDakQsTUFBTSxRQUFRLEdBQXlCO2dCQUNuQztvQkFDSSxJQUFJLEVBQUUsV0FBVztvQkFDakIsT0FBTyxFQUFFLGVBQWU7b0JBQ3hCLFVBQVUsRUFBRTt3QkFDUjs0QkFDSSxJQUFJLEVBQUUsVUFBVTs0QkFDaEIsUUFBUSxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUU7eUJBQzdEO3FCQUNKO2lCQUNKO2dCQUNEO29CQUNJLElBQUksRUFBRSxNQUFNO29CQUNaLE9BQU8sRUFBRSxnQkFBZ0I7aUJBQzVCO2FBQ0osQ0FBQztZQUNGLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNqRCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1ZvbHVtZXMvTUFDX0FQUC9vcGVubWFrZV9sbG0vYmFja2VuZC9hcGkvc3JjL19fdGVzdHNfXy9DaGF0U2VydmljZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ2hhdFNlcnZpY2UgVGVzdHNcbiAqIEJhc2ljIHRlc3RzIGZvciBjaGF0IHNlcnZpY2UgdHlwZXMgYW5kIGludGVyZmFjZXNcbiAqL1xuaW1wb3J0IHsgQ2hhdEhpc3RvcnlNZXNzYWdlLCBBZ2VudFNlbGVjdGlvbkluZm8sIFRvb2xDYWxsSW5mbywgV2ViU2VhcmNoUmVzdWx0IH0gZnJvbSAnLi4vc2VydmljZXMvQ2hhdFNlcnZpY2UnO1xuXG5kZXNjcmliZSgnQ2hhdFNlcnZpY2UgVHlwZXMnLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ0NoYXRIaXN0b3J5TWVzc2FnZScsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBhbGxvdyB2YWxpZCB1c2VyIG1lc3NhZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtc2c6IENoYXRIaXN0b3J5TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgICAgY29udGVudDogJ0hlbGxvIHdvcmxkJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGV4cGVjdChtc2cucm9sZSkudG9CZSgndXNlcicpO1xuICAgICAgICAgICAgZXhwZWN0KG1zZy5jb250ZW50KS50b0JlKCdIZWxsbyB3b3JsZCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGFsbG93IGFzc2lzdGFudCBtZXNzYWdlIHdpdGggdG9vbF9jYWxscycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1zZzogQ2hhdEhpc3RvcnlNZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IFt7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndGVzdF90b29sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogeyBhcmcxOiAndmFsdWUnIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXhwZWN0KG1zZy50b29sX2NhbGxzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICAgICAgICBleHBlY3QobXNnLnRvb2xfY2FsbHMhWzBdLmZ1bmN0aW9uLm5hbWUpLnRvQmUoJ3Rlc3RfdG9vbCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGFsbG93IG1lc3NhZ2Ugd2l0aCBpbWFnZXMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtc2c6IENoYXRIaXN0b3J5TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgICAgY29udGVudDogJ0NoZWNrIHRoaXMgaW1hZ2UnLFxuICAgICAgICAgICAgICAgIGltYWdlczogWydiYXNlNjRkYXRhJ11cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBleHBlY3QobXNnLmltYWdlcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGFsbG93IHN5c3RlbSBtZXNzYWdlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbXNnOiBDaGF0SGlzdG9yeU1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgICAgICAgICAgY29udGVudDogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBleHBlY3QobXNnLnJvbGUpLnRvQmUoJ3N5c3RlbScpO1xuICAgICAgICAgICAgZXhwZWN0KG1zZy5jb250ZW50KS50b0JlKCdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBhbGxvdyB0b29sIG1lc3NhZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtc2c6IENoYXRIaXN0b3J5TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICByb2xlOiAndG9vbCcsXG4gICAgICAgICAgICAgICAgY29udGVudDogJ1Rvb2wgcmVzdWx0J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGV4cGVjdChtc2cucm9sZSkudG9CZSgndG9vbCcpO1xuICAgICAgICAgICAgZXhwZWN0KG1zZy5jb250ZW50KS50b0JlKCdUb29sIHJlc3VsdCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGFsbG93IG1lc3NhZ2Ugd2l0aCBtdWx0aXBsZSBpbWFnZXMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtc2c6IENoYXRIaXN0b3J5TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgICAgY29udGVudDogJ0NvbXBhcmUgdGhlc2UgaW1hZ2VzJyxcbiAgICAgICAgICAgICAgICBpbWFnZXM6IFsnaW1hZ2UxJywgJ2ltYWdlMicsICdpbWFnZTMnXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGV4cGVjdChtc2cuaW1hZ2VzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYWxsb3cgbWVzc2FnZSB3aXRoIHN0cmluZyBhcmd1bWVudHMgaW4gdG9vbF9jYWxscycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1zZzogQ2hhdEhpc3RvcnlNZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IFt7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc2VhcmNoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogJ3tcInF1ZXJ5XCI6IFwidGVzdFwifSdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXhwZWN0KHR5cGVvZiBtc2cudG9vbF9jYWxscyFbMF0uZnVuY3Rpb24uYXJndW1lbnRzKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBhbGxvdyBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdmlhIGluZGV4IHNpZ25hdHVyZScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1zZzogQ2hhdEhpc3RvcnlNZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnVGVzdCcsXG4gICAgICAgICAgICAgICAgY3VzdG9tRmllbGQ6ICdjdXN0b20gdmFsdWUnLFxuICAgICAgICAgICAgICAgIGFub3RoZXJGaWVsZDogMTIzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXhwZWN0KChtc2cgYXMgYW55KS5jdXN0b21GaWVsZCkudG9CZSgnY3VzdG9tIHZhbHVlJyk7XG4gICAgICAgICAgICBleHBlY3QoKG1zZyBhcyBhbnkpLmFub3RoZXJGaWVsZCkudG9CZSgxMjMpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdBZ2VudFNlbGVjdGlvbkluZm8nLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgcmVwcmVzZW50IGFnZW50IHNlbGVjdGlvbicsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZm86IEFnZW50U2VsZWN0aW9uSW5mbyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnY29kZV9leHBlcnQnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdDb2RlIEV4cGVydCcsXG4gICAgICAgICAgICAgICAgZW1vamk6ICfwn5Go4oCN8J+SuycsXG4gICAgICAgICAgICAgICAgY29uZmlkZW5jZTogMC45NSxcbiAgICAgICAgICAgICAgICByZWFzb246ICdDb2RlLXJlbGF0ZWQgcXVlcnkgZGV0ZWN0ZWQnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXhwZWN0KGluZm8udHlwZSkudG9CZSgnY29kZV9leHBlcnQnKTtcbiAgICAgICAgICAgIGV4cGVjdChpbmZvLmNvbmZpZGVuY2UpLnRvQmUoMC45NSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYWxsb3cgcGFydGlhbCBhZ2VudCBzZWxlY3Rpb24gaW5mbycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZm86IEFnZW50U2VsZWN0aW9uSW5mbyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzZWFyY2hlcidcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBleHBlY3QoaW5mby50eXBlKS50b0JlKCdyZXNlYXJjaGVyJyk7XG4gICAgICAgICAgICBleHBlY3QoaW5mby5uYW1lKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYWxsb3cgcGhhc2UgcHJvcGVydHknLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbmZvOiBBZ2VudFNlbGVjdGlvbkluZm8gPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2FnZW50JyxcbiAgICAgICAgICAgICAgICBwaGFzZTogJ2FuYWx5c2lzJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGV4cGVjdChpbmZvLnBoYXNlKS50b0JlKCdhbmFseXNpcycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGFsbG93IGFkZGl0aW9uYWwgcHJvcGVydGllcycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZm86IEFnZW50U2VsZWN0aW9uSW5mbyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZXhwZXJ0JyxcbiAgICAgICAgICAgICAgICBjdXN0b21Qcm9wOiAndmFsdWUnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXhwZWN0KChpbmZvIGFzIGFueSkuY3VzdG9tUHJvcCkudG9CZSgndmFsdWUnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnVG9vbENhbGxJbmZvJywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIHJlcHJlc2VudCB0b29sIGNhbGwgc3RydWN0dXJlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9vbDogVG9vbENhbGxJbmZvID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3dlYl9zZWFyY2gnLFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHsgcXVlcnk6ICd0ZXN0IHF1ZXJ5JyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGV4cGVjdCh0b29sLmZ1bmN0aW9uLm5hbWUpLnRvQmUoJ3dlYl9zZWFyY2gnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBhbGxvdyB0b29sIGNhbGwgd2l0aG91dCB0eXBlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9vbDogVG9vbENhbGxJbmZvID0ge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjYWxjdWxhdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiB7IG9wZXJhdGlvbjogJ2FkZCcsIGE6IDEsIGI6IDIgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBleHBlY3QodG9vbC5mdW5jdGlvbi5uYW1lKS50b0JlKCdjYWxjdWxhdG9yJyk7XG4gICAgICAgICAgICBleHBlY3QoKHRvb2wuZnVuY3Rpb24uYXJndW1lbnRzIGFzIGFueSkuYSkudG9CZSgxKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tcGxleCBhcmd1bWVudHMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0b29sOiBUb29sQ2FsbEluZm8gPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY29tcGxleF90b29sJyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXN0ZWQ6IHsgZGVlcDogeyB2YWx1ZTogJ3Rlc3QnIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5OiBbMSwgMiwgM10sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmc6ICd2YWx1ZSdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBleHBlY3QoKHRvb2wuZnVuY3Rpb24uYXJndW1lbnRzIGFzIGFueSkubmVzdGVkLmRlZXAudmFsdWUpLnRvQmUoJ3Rlc3QnKTtcbiAgICAgICAgICAgIGV4cGVjdCgodG9vbC5mdW5jdGlvbi5hcmd1bWVudHMgYXMgYW55KS5hcnJheSkudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdXZWJTZWFyY2hSZXN1bHQnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgcmVwcmVzZW50IHNlYXJjaCByZXN1bHQnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQ6IFdlYlNlYXJjaFJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogJ1Rlc3QgUGFnZScsXG4gICAgICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbScsXG4gICAgICAgICAgICAgICAgc25pcHBldDogJ0EgdGVzdCBzbmlwcGV0J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQudGl0bGUpLnRvQmUoJ1Rlc3QgUGFnZScpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC51cmwpLnRvQmUoJ2h0dHBzOi8vZXhhbXBsZS5jb20nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBhbGxvdyByZXN1bHQgd2l0aG91dCBzbmlwcGV0JywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0OiBXZWJTZWFyY2hSZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgdGl0bGU6ICdBbm90aGVyIFBhZ2UnLFxuICAgICAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vYW5vdGhlci5jb20nXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC50aXRsZSkudG9CZSgnQW5vdGhlciBQYWdlJyk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LnNuaXBwZXQpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgVVJMcyB3aXRoIHF1ZXJ5IHBhcmFtZXRlcnMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQ6IFdlYlNlYXJjaFJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogJ1NlYXJjaCBSZXN1bHRzJyxcbiAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3NlYXJjaD9xPXRlc3QmbGFuZz1lbicsXG4gICAgICAgICAgICAgICAgc25pcHBldDogJ1Jlc3VsdHMgZm9yIHRlc3QnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC51cmwpLnRvQ29udGFpbignP3E9dGVzdCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBsb25nIHNuaXBwZXRzJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbG9uZ1NuaXBwZXQgPSAnQScucmVwZWF0KDUwMCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQ6IFdlYlNlYXJjaFJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0xvbmcgUmVzdWx0JyxcbiAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tJyxcbiAgICAgICAgICAgICAgICBzbmlwcGV0OiBsb25nU25pcHBldFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuc25pcHBldCkudG9IYXZlTGVuZ3RoKDUwMCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1R5cGUgQ29tcGF0aWJpbGl0eScsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBhbGxvdyBDaGF0SGlzdG9yeU1lc3NhZ2UgYXJyYXknLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlczogQ2hhdEhpc3RvcnlNZXNzYWdlW10gPSBbXG4gICAgICAgICAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdIZWxsbycgfSxcbiAgICAgICAgICAgICAgICB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnSGkgdGhlcmUnIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBleHBlY3QobWVzc2FnZXMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5yb2xlKS50b0JlKCd1c2VyJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYWxsb3cgV2ViU2VhcmNoUmVzdWx0IGFycmF5JywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0czogV2ViU2VhcmNoUmVzdWx0W10gPSBbXG4gICAgICAgICAgICAgICAgeyB0aXRsZTogJ1Jlc3VsdCAxJywgdXJsOiAnaHR0cHM6Ly9leGFtcGxlMS5jb20nIH0sXG4gICAgICAgICAgICAgICAgeyB0aXRsZTogJ1Jlc3VsdCAyJywgdXJsOiAnaHR0cHM6Ly9leGFtcGxlMi5jb20nLCBzbmlwcGV0OiAnU25pcHBldCcgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHRzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYWxsb3cgbWl4ZWQgdG9vbF9jYWxscyBpbiBtZXNzYWdlcycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzOiBDaGF0SGlzdG9yeU1lc3NhZ2VbXSA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnSSB3aWxsIHNlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiB7IG5hbWU6ICdzZWFyY2gnLCBhcmd1bWVudHM6IHsgcXVlcnk6ICd0ZXN0JyB9IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByb2xlOiAndG9vbCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdTZWFyY2ggcmVzdWx0cydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICAgICAgICBleHBlY3QobWVzc2FnZXNbMF0udG9vbF9jYWxscykudG9CZURlZmluZWQoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==